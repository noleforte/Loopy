<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loopy</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link rel="icon" href="media/favicon.png" type="image/png">
</head>
<body>
     <!-- Progress Indicator -->
     <div id="progress-indicator">
         <div class="progress-dot active" data-section="0"></div>
         <div class="progress-dot" data-section="1"></div>
         <div class="progress-dot" data-section="2"></div>
         <div class="progress-dot" data-section="3"></div>
     </div>

     <!-- Main Container for GSAP Animations -->
     <div id="main-container">
    <!-- Banner Section - Full Screen -->
         <section id="banner" class="banner">
        <div class="banner-content">
            <h1>Welcome to Loopy</h1>
            <p>Experience the future of web design</p>
                 <button class="cta-button" onclick="nextSection()">Get Started</button>
        </div>
    </section>

         <!-- Section 1 - About Us -->
         <section id="section1" class="horizontal-section section-1">
        <div class="section-content">
            <h2>About Us</h2>
            <p>We create innovative digital experiences that push the boundaries of what's possible in web design and user interaction.</p>
            <div class="features">
                <div class="feature">
                    <h3>Innovation</h3>
                    <p>Cutting-edge solutions for modern problems</p>
                </div>
                <div class="feature">
                    <h3>Design</h3>
                    <p>Beautiful, functional, and user-centered design</p>
                </div>
                <div class="feature">
                    <h3>Technology</h3>
                    <p>Latest technologies and best practices</p>
                </div>
            </div>
            <button class="nav-button" onclick="nextSection()">Continue</button>
        </div>
    </section>

         <!-- Section 2 - Services -->
         <section id="section2" class="horizontal-section section-2">
        <div class="section-content">
            <h2>Our Services</h2>
            <p>Comprehensive digital solutions tailored to your needs</p>
            <div class="services">
                <div class="service">
                    <h3>Web Development</h3>
                    <p>Custom websites and web applications built with modern technologies</p>
                </div>
                <div class="service">
                    <h3>UI/UX Design</h3>
                    <p>User-centered design that creates exceptional experiences</p>
                </div>
                <div class="service">
                    <h3>Consulting</h3>
                    <p>Strategic guidance for your digital transformation journey</p>
                </div>
            </div>
            <button class="nav-button" onclick="nextSection()">Continue</button>
        </div>
    </section>

         <!-- Final Section - Contact -->
         <section id="contact" class="final-section">
        <div class="section-content">
            <h2>Contact Us</h2>
            <p>Ready to start your next project? Let's talk about how we can help you achieve your goals.</p>
            <div class="contact-info">
                <div class="contact-item">
                    <h3>Email</h3>
                    <p>hello@loopy.com</p>
                </div>
                <div class="contact-item">
                    <h3>Phone</h3>
                    <p>+1 (555) 123-4567</p>
                </div>
                <div class="contact-item">
                    <h3>Address</h3>
                    <p>123 Innovation Street, Tech City, TC 12345</p>
                </div>
            </div>
            <button class="nav-button" onclick="nextSection()">Back to Start</button>
        </div>
    </section>
     </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <p>&copy; 2025 Loopy. All rights reserved.</p>
            <div class="footer-links">
                <a href="#">Privacy Policy</a>
                <a href="#">Terms of Service</a>
                <a href="#">Contact</a>
            </div>
        </div>
    </footer>

     <!-- GSAP Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.3/gsap.min.js" integrity="sha512-gmwBmiTVER57N3jYS3LinA9eb8aHrJua5iQD7yqYCKa5x6Jjc7VDVaEA0je0Lu0bP9j7tEjV3+1qUm6loO99Kw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    
    <script>
        // GSAP Square Navigation System
        let currentSection = 0;
        const sections = ['banner', 'section1', 'section2', 'contact'];
        let isAnimating = false;

        // Initialize GSAP timeline and setup - Square layout
        gsap.set("#main-container", { position: "relative" });
        gsap.set("#banner", { x: 0, y: 0 });           // Top-left
        gsap.set("#section1", { x: "100vw", y: 0 });    // Top-right  
        gsap.set("#section2", { x: 0, y: "100vh" });    // Bottom-left
        gsap.set("#contact", { x: "-100vw", y: "100vh" }); // Bottom-left (слева от section2)

        // Navigation function
        function nextSection() {
            if (isAnimating) return;
            isAnimating = true;

            const current = sections[currentSection];
            const next = sections[(currentSection + 1) % sections.length];
            
            let animation;
            
            switch(currentSection) {
                case 0: // banner → section1 (вправо)
                    animation = gsap.timeline()
                        .to("#banner", { x: "-100vw", duration: 1, ease: "power2.inOut" })
                        .to("#section1", { x: 0, duration: 1, ease: "power2.inOut" }, 0);
                    break;
                    
                case 1: // section1 → section2 (вниз)
                    animation = gsap.timeline()
                        .to("#section1", { y: "-100vh", duration: 1, ease: "power2.inOut" })
                        .to("#section2", { y: 0, duration: 1, ease: "power2.inOut" }, 0);
                    break;
                    
                case 2: // section2 → contact (влево) - исправляем белый экран
                    animation = gsap.timeline()
                        .to("#section2", { x: "-100vw", duration: 1, ease: "power2.inOut" })
                        .to("#contact", { x: 0, duration: 1, ease: "power2.inOut" }, 0);
                    break;
                    
                case 3: // contact → banner (вверх, banner сверху)
                    animation = gsap.timeline()
                        .to("#contact", { y: "-100vh", duration: 1, ease: "power2.inOut" })
                        .to("#banner", { y: 0, duration: 1, ease: "power2.inOut" }, 0);
                    break;
            }

            animation.eventCallback("onComplete", () => {
                // Reset positions for next cycle
                resetSectionPositions();
                currentSection = (currentSection + 1) % sections.length;
                isAnimating = false;
            });
        }

        // Previous section function
        function previousSection() {
            if (isAnimating) return;
            isAnimating = true;

            const current = sections[currentSection];
            const prev = sections[(currentSection - 1 + sections.length) % sections.length];
            
            let animation;
            
            switch(currentSection) {
                case 0: // banner ← contact (вниз)
                    animation = gsap.timeline()
                        .to("#banner", { y: "100vh", duration: 1, ease: "power2.inOut" })
                        .to("#contact", { y: 0, duration: 1, ease: "power2.inOut" }, 0);
                    break;
                    
                case 1: // section1 ← banner (влево)
                    animation = gsap.timeline()
                        .to("#section1", { x: "100vw", duration: 1, ease: "power2.inOut" })
                        .to("#banner", { x: 0, duration: 1, ease: "power2.inOut" }, 0);
                    break;
                    
                case 2: // section2 ← section1 (вверх)
                    animation = gsap.timeline()
                        .to("#section2", { y: "100vh", duration: 1, ease: "power2.inOut" })
                        .to("#section1", { y: 0, duration: 1, ease: "power2.inOut" }, 0);
                    break;
                    
                case 3: // contact ← section2 (вправо)
                    animation = gsap.timeline()
                        .to("#contact", { x: "-100vw", duration: 1, ease: "power2.inOut" })
                        .to("#section2", { x: 0, duration: 1, ease: "power2.inOut" }, 0);
                    break;
            }

            animation.eventCallback("onComplete", () => {
                // Reset positions for next cycle
                resetPreviousSectionPositions();
                currentSection = (currentSection - 1 + sections.length) % sections.length;
                isAnimating = false;
            });
        }

        // Reset section positions for previous navigation
        function resetPreviousSectionPositions() {
            const prevSection = (currentSection - 1 + sections.length) % sections.length;
            
            switch(prevSection) {
                case 0: // banner (top-left)
                    gsap.set("#banner", { x: 0, y: 0 });
                    gsap.set("#section1", { x: "100vw", y: 0 });
                    gsap.set("#section2", { x: 0, y: "100vh" });
                    gsap.set("#contact", { x: "-100vw", y: "100vh" });
                    break;
                case 1: // section1 (top-right)
                    gsap.set("#banner", { x: "-100vw", y: 0 });
                    gsap.set("#section1", { x: 0, y: 0 });
                    gsap.set("#section2", { x: 0, y: "100vh" });
                    gsap.set("#contact", { x: "-100vw", y: "100vh" });
                    break;
                case 2: // section2 (bottom-left)
                    gsap.set("#banner", { x: "-100vw", y: 0 });
                    gsap.set("#section1", { x: 0, y: "-100vh" });
                    gsap.set("#section2", { x: 0, y: 0 });
                    gsap.set("#contact", { x: "-100vw", y: "100vh" });
                    break;
                case 3: // contact (bottom-left)
                    gsap.set("#banner", { x: "-100vw", y: 0 });
                    gsap.set("#section1", { x: 0, y: "-100vh" });
                    gsap.set("#section2", { x: "100vw", y: 0 });
                    gsap.set("#contact", { x: 0, y: 0 });
                    break;
            }
        }

        // Reset section positions for next cycle
        function resetSectionPositions() {
            const nextSection = (currentSection + 1) % sections.length;
            
            switch(nextSection) {
                case 0: // banner (top-left)
                    gsap.set("#banner", { x: 0, y: 0 });
                    gsap.set("#section1", { x: "100vw", y: 0 });
                    gsap.set("#section2", { x: 0, y: "100vh" });
                    gsap.set("#contact", { x: "-100vw", y: "100vh" });
                    break;
                case 1: // section1 (top-right)
                    gsap.set("#banner", { x: "-100vw", y: 0 });
                    gsap.set("#section1", { x: 0, y: 0 });
                    gsap.set("#section2", { x: 0, y: "100vh" });
                    gsap.set("#contact", { x: "-100vw", y: "100vh" });
                    break;
                case 2: // section2 (bottom-left)
                    gsap.set("#banner", { x: "-100vw", y: 0 });
                    gsap.set("#section1", { x: 0, y: "-100vh" });
                    gsap.set("#section2", { x: 0, y: 0 });
                    gsap.set("#contact", { x: "-100vw", y: "100vh" });
                    break;
                case 3: // contact (bottom-left)
                    gsap.set("#banner", { x: "-100vw", y: 0 });
                    gsap.set("#section1", { x: 0, y: "-100vh" });
                    gsap.set("#section2", { x: "100vw", y: 0 });
                    gsap.set("#contact", { x: 0, y: 0 });
                    break;
            }
        }

        // Scroll navigation - simplified
        let scrollTimeout;
        let isScrolling = false;

        document.addEventListener('wheel', (e) => {
            e.preventDefault();
            
            if (isScrolling || isAnimating) return;
            
            isScrolling = true;
            clearTimeout(scrollTimeout);
            scrollTimeout = setTimeout(() => {
                isScrolling = false;
            }, 800);

            if (e.deltaY > 0) {
                // Scroll down - next section
                nextSection();
                updateProgressIndicator();
            } else if (e.deltaY < 0) {
                // Scroll up - previous section
                previousSection();
                updateProgressIndicator();
            }
        });

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                if (!isAnimating) {
                    nextSection();
                    updateProgressIndicator();
                }
            } else if (e.key === 'ArrowLeft') {
                e.preventDefault();
                if (!isAnimating) {
                    previousSection();
                    updateProgressIndicator();
                }
            }
        });

        // Progress indicator functionality
        function updateProgressIndicator() {
            document.querySelectorAll('.progress-dot').forEach((dot, index) => {
                if (index === currentSection) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });
        }

        // Click on progress dots - simplified
        document.querySelectorAll('.progress-dot').forEach((dot, index) => {
            dot.addEventListener('click', () => {
                if (index === currentSection || isAnimating) return;
                
                // Simple approach - just call nextSection until we reach target
                if (index > currentSection) {
                    const steps = index - currentSection;
                    for (let i = 0; i < steps; i++) {
                        setTimeout(() => {
                            if (!isAnimating) {
                                nextSection();
                                updateProgressIndicator();
                            }
                        }, i * 200);
                    }
                } else {
                    const steps = currentSection - index;
                    for (let i = 0; i < steps; i++) {
                        setTimeout(() => {
                            if (!isAnimating) {
                                previousSection();
                                updateProgressIndicator();
                            }
                        }, i * 200);
                    }
                }
            });
        });

        // Initialize progress indicator
        updateProgressIndicator();


    </script>
</body>
</html>