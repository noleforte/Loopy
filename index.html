<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Loopy</title>
    <link rel="stylesheet" href="style.css?v=2.4">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <link rel="icon" href="media/favicon.png" type="image/png">
</head>
<body>
     <!-- Progress Indicator -->
     <div id="progress-indicator">
         <div class="progress-dot active" data-section="0"></div>
         <div class="progress-dot" data-section="1"></div>
         <div class="progress-dot" data-section="2"></div>
         <div class="progress-dot" data-section="3"></div>
     </div>

     <!-- Main Container for GSAP Animations -->
     <div id="main-container">
     <!-- Banner Section - Full Screen -->
     <section id="banner" class="banner">
        <div class="banner-content">
            <h1 class="banner-title animate-title">Welcome to Loopy</h1>
            <p class="banner-subtitle animate-subtitle">Experience the future of web design</p>
            <button class="cta-button animate-button" onclick="nextSection()">Get Started</button>
        </div>
     </section>

         <!-- Section 1 - About Us -->
         <section id="section1" class="horizontal-section section-1">
        <div class="section-content">
            <h2 class="section-heading animate-title">About Us</h2>
            <p class="section-description animate-text">We create innovative digital experiences that push the boundaries of what's possible in web design and user interaction.</p>
            <div class="features">
                <div class="feature animate-card" data-delay="0.1">
                    <h3 class="feature-title">Innovation</h3>
                    <p class="feature-text">Cutting-edge solutions for modern problems</p>
                </div>
                <div class="feature animate-card" data-delay="0.2">
                    <h3 class="feature-title">Design</h3>
                    <p class="feature-text">Beautiful, functional, and user-centered design</p>
                </div>
                <div class="feature animate-card" data-delay="0.3">
                    <h3 class="feature-title">Technology</h3>
                    <p class="feature-text">Latest technologies and best practices</p>
                </div>
            </div>
            <button class="nav-button animate-button" onclick="nextSection()">Continue</button>
        </div>
    </section>

         <!-- Section 2 - Services -->
         <section id="section2" class="horizontal-section section-2">
        <div class="section-content">
            <h2 class="section-heading animate-title">Our Services</h2>
            <p class="section-description animate-text">Comprehensive digital solutions tailored to your needs</p>
            <div class="services">
                <div class="service animate-card" data-delay="0.1">
                    <h3 class="service-title">Web Development</h3>
                    <p class="service-text">Custom websites and web applications built with modern technologies</p>
                </div>
                <div class="service animate-card" data-delay="0.2">
                    <h3 class="service-title">UI/UX Design</h3>
                    <p class="service-text">User-centered design that creates exceptional experiences</p>
                </div>
                <div class="service animate-card" data-delay="0.3">
                    <h3 class="service-title">Consulting</h3>
                    <p class="service-text">Strategic guidance for your digital transformation journey</p>
                </div>
            </div>
            <button class="nav-button animate-button" onclick="nextSection()">Continue</button>
        </div>
    </section>

         <!-- Final Section - Contact -->
         <section id="contact" class="final-section">
        <div class="section-content">
            <h2 class="section-heading animate-title">Contact Us</h2>
            <p class="section-description animate-text">Ready to start your next project? Let's talk about how we can help you achieve your goals.</p>
            <div class="contact-info">
                <div class="contact-item animate-card" data-delay="0.1">
                    <h3 class="contact-title">Email</h3>
                    <p class="contact-text">hello@loopy.com</p>
                </div>
                <div class="contact-item animate-card" data-delay="0.2">
                    <h3 class="contact-title">Phone</h3>
                    <p class="contact-text">+1 (555) 123-4567</p>
                </div>
                <div class="contact-item animate-card" data-delay="0.3">
                    <h3 class="contact-title">Address</h3>
                    <p class="contact-text">123 Innovation Street, Tech City, TC 12345</p>
                </div>
            </div>
            <button class="nav-button animate-button" onclick="nextSection()">Back to Start</button>
        </div>
    </section>
     </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <p>&copy; 2025 Loopy. All rights reserved.</p>
            <div class="footer-links">
                <a href="#">Privacy Policy</a>
                <a href="#">Terms of Service</a>
                <a href="#">Contact</a>
            </div>
        </div>
    </footer>

     <!-- GSAP Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.3/gsap.min.js" integrity="sha512-gmwBmiTVER57N3jYS3LinA9eb8aHrJua5iQD7yqYCKa5x6Jjc7VDVaEA0je0Lu0bP9j7tEjV3+1qUm6loO99Kw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    
    <script>
        // GSAP Square Navigation System
        let currentSection = 0;
        const sections = ['banner', 'section1', 'section2', 'contact'];
        const directions = [
            { x: 100, y: 0 },   // banner -> section1 (right)
            { x: 0, y: 100 },   // section1 -> section2 (down)
            { x: -100, y: 0 },  // section2 -> contact (left)
            { x: 0, y: -100 }   // contact -> banner (up)
        ];
        let isAnimating = false;

        const unitValue = (value, unit) => (value === 0 ? 0 : `${value}${unit}`);

        function splitTextElement(element) {
            if (!element) return null;
            if (element.dataset.split === 'true' && element.__splitText) {
                return element.__splitText;
            }

            const text = element.textContent.replace(/\s+/g, ' ').trim();
            element.textContent = '';

            const words = [];
            const chars = [];

            text.split(' ').forEach((word, index, array) => {
                if (!word) return;

                const container = document.createElement('span');
                container.classList.add('split-word-container');

                const wordSpan = document.createElement('span');
                wordSpan.classList.add('split-word');
                container.appendChild(wordSpan);

                word.split('').forEach((character) => {
                    const charSpan = document.createElement('span');
                    charSpan.classList.add('split-char');
                    charSpan.textContent = character;
                    wordSpan.appendChild(charSpan);
                    chars.push(charSpan);
                });

                words.push(wordSpan);
                element.appendChild(container);

                if (index < array.length - 1) {
                    element.appendChild(document.createTextNode(' '));
                }
            });

            element.dataset.split = 'true';
            element.__splitText = { words, chars };
            return element.__splitText;
        }

        function prepareSectionForAnimation(section) {
            if (!section) return;

            const title = section.querySelector('.animate-title');
            if (title) {
                const split = splitTextElement(title);
                if (split) {
                    gsap.set(title, { perspective: 800 });
                    gsap.set(split.chars, {
                        yPercent: 120,
                        rotateX: -80,
                        opacity: 0,
                        transformOrigin: '50% 100%'
                    });
                }
            }

            const detailTexts = section.querySelectorAll('.animate-subtitle, .animate-text');
            detailTexts.forEach((element) => {
                const split = splitTextElement(element);
                if (!split) return;
                gsap.set(split.words, {
                    yPercent: 110,
                    opacity: 0,
                    skewY: 6
                });
            });

            const cards = section.querySelectorAll('.animate-card');
            if (cards.length) {
                gsap.set(cards, {
                    opacity: 0,
                    y: 60,
                    scale: 0.95,
                    rotateX: 8
                });
            }

            const buttons = section.querySelectorAll('.animate-button');
            if (buttons.length) {
                gsap.set(buttons, {
                    opacity: 0,
                    y: 40,
                    scale: 0.9
                });
            }
        }

        function prepareTextAnimations() {
            document.querySelectorAll('.animate-title, .animate-subtitle, .animate-text').forEach((element) => {
                splitTextElement(element);
            });
        }

        function positionSections(centerIndex) {
            let offsetX = 0;
            let offsetY = 0;

            const currentId = sections[centerIndex];
            gsap.set(`#${currentId}`, { x: 0, y: 0 });

            for (let step = 1; step < sections.length; step++) {
                const directionIndex = (centerIndex + step - 1 + directions.length) % directions.length;
                offsetX += directions[directionIndex].x;
                offsetY += directions[directionIndex].y;
                const targetId = sections[(centerIndex + step) % sections.length];
                gsap.set(`#${targetId}`, {
                    x: unitValue(offsetX, 'vw'),
                    y: unitValue(offsetY, 'vh')
                });
            }
        }

        // Navigation function
        function nextSection() {
            if (isAnimating) return;
            isAnimating = true;

            const nextIndex = (currentSection + 1) % sections.length;
            const direction = directions[currentSection];
            const currentSelector = `#${sections[currentSection]}`;
            const nextSelector = `#${sections[nextIndex]}`;

            prepareSectionForAnimation(document.getElementById(sections[nextIndex]));

            const animation = gsap.timeline({
                onComplete: () => {
                    currentSection = nextIndex;
                    positionSections(currentSection);
                    isAnimating = false;
                    updateProgressIndicator();
                    // Animate new section
                    setTimeout(() => animateCurrentSection(), 100);
                }
            });

            if (direction.x !== 0) {
                animation
                    .to(currentSelector, { x: unitValue(-Math.sign(direction.x) * 100, 'vw'), duration: 1, ease: "power2.inOut" })
                    .to(nextSelector, { x: 0, duration: 1, ease: "power2.inOut" }, 0);
            } else {
                animation
                    .to(currentSelector, { y: unitValue(-Math.sign(direction.y) * 100, 'vh'), duration: 1, ease: "power2.inOut" })
                    .to(nextSelector, { y: 0, duration: 1, ease: "power2.inOut" }, 0);
            }
        }

        // Previous section function
        function previousSection() {
            if (isAnimating) return;
            isAnimating = true;

            const previousIndex = (currentSection - 1 + sections.length) % sections.length;
            const direction = directions[previousIndex];
            const deltaX = -direction.x;
            const deltaY = -direction.y;
            const currentSelector = `#${sections[currentSection]}`;
            const previousSelector = `#${sections[previousIndex]}`;

            prepareSectionForAnimation(document.getElementById(sections[previousIndex]));

            const animation = gsap.timeline({
                onComplete: () => {
                    currentSection = previousIndex;
                    positionSections(currentSection);
                    isAnimating = false;
                    updateProgressIndicator();
                    // Animate new section
                    setTimeout(() => animateCurrentSection(), 100);
                }
            });

            if (deltaX !== 0) {
                animation
                    .to(currentSelector, { x: unitValue(-Math.sign(deltaX) * 100, 'vw'), duration: 1, ease: "power2.inOut" })
                    .to(previousSelector, { x: 0, duration: 1, ease: "power2.inOut" }, 0);
            } else {
                animation
                    .to(currentSelector, { y: unitValue(-Math.sign(deltaY) * 100, 'vh'), duration: 1, ease: "power2.inOut" })
                    .to(previousSelector, { y: 0, duration: 1, ease: "power2.inOut" }, 0);
            }
        }

        // Scroll navigation - simplified
        let scrollTimeout;
        let isScrolling = false;

        document.addEventListener('wheel', (e) => {
            e.preventDefault();
            
            if (isScrolling || isAnimating) return;
            
            isScrolling = true;
            clearTimeout(scrollTimeout);
            scrollTimeout = setTimeout(() => {
                isScrolling = false;
            }, 800);

            if (e.deltaY > 0) {
                // Scroll down - next section
                nextSection();
            } else if (e.deltaY < 0) {
                // Scroll up - previous section
                previousSection();
            }
        });

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' || e.key === ' ') {
                e.preventDefault();
                if (!isAnimating) {
                    nextSection();
                }
            } else if (e.key === 'ArrowLeft') {
                e.preventDefault();
                if (!isAnimating) {
                    previousSection();
                }
            }
        });

        // Progress indicator functionality
        function updateProgressIndicator() {
            document.querySelectorAll('.progress-dot').forEach((dot, index) => {
                if (index === currentSection) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });
        }

        // Click on progress dots - simplified
        document.querySelectorAll('.progress-dot').forEach((dot, index) => {
            dot.addEventListener('click', () => {
                if (index === currentSection || isAnimating) return;
                
                // Simple approach - just call nextSection until we reach target
                if (index > currentSection) {
                    const steps = index - currentSection;
                    for (let i = 0; i < steps; i++) {
                        setTimeout(() => {
                            if (!isAnimating) {
                                nextSection();
                            }
                        }, i * 200);
                    }
                } else {
                    const steps = currentSection - index;
                    for (let i = 0; i < steps; i++) {
                        setTimeout(() => {
                            if (!isAnimating) {
                                previousSection();
                            }
                        }, i * 200);
                    }
                }
            });
        });

        // Animation Functions
        function initializeAnimations() {
            prepareTextAnimations();
            sections.forEach((id) => {
                const section = document.getElementById(id);
                prepareSectionForAnimation(section);
            });
            animateBanner();
        }

        function animateBanner() {
            const banner = document.getElementById('banner');
            if (!banner) return;

            const tl = gsap.timeline({ defaults: { ease: "power3.out" } });

            const titleSplit = splitTextElement(banner.querySelector('.animate-title'));
            if (titleSplit && titleSplit.chars.length) {
                tl.to(titleSplit.chars, {
                    yPercent: 0,
                    rotateX: 0,
                    opacity: 1,
                    duration: 1.2,
                    stagger: { each: 0.045, from: 'start' }
                });
            }

            const subtitleSplit = splitTextElement(banner.querySelector('.animate-subtitle'));
            if (subtitleSplit && subtitleSplit.words.length) {
                tl.to(subtitleSplit.words, {
                    yPercent: 0,
                    opacity: 1,
                    skewY: 0,
                    duration: 1,
                    stagger: 0.08
                }, "-=0.8");
            }

            const button = banner.querySelector('.animate-button');
            if (button) {
                tl.to(button, {
                    opacity: 1,
                    y: 0,
                    scale: 1,
                    duration: 0.8,
                    ease: "back.out(1.7)"
                }, "-=0.5");
            }
        }

        function animateCurrentSection() {
            const currentSectionId = sections[currentSection];
            const section = document.getElementById(currentSectionId);
            if (!section) return;

            if (currentSectionId === 'banner') {
                animateBanner();
                return;
            }

            const tl = gsap.timeline({ defaults: { ease: "power3.out" } });

            const titleSplit = splitTextElement(section.querySelector('.animate-title'));
            if (titleSplit && titleSplit.chars.length) {
                tl.to(titleSplit.chars, {
                    yPercent: 0,
                    rotateX: 0,
                    opacity: 1,
                    duration: 1,
                    stagger: { each: 0.045, from: 'start' }
                });
            }

            const textElements = section.querySelectorAll('.animate-text');
            textElements.forEach((element) => {
                const split = splitTextElement(element);
                if (!split || !split.words.length) return;
                tl.to(split.words, {
                    yPercent: 0,
                    opacity: 1,
                    skewY: 0,
                    duration: 0.9,
                    stagger: 0.08
                }, "-=0.6");
            });

            const cards = section.querySelectorAll('.animate-card');
            if (cards.length) {
                tl.to(cards, {
                    opacity: 1,
                    y: 0,
                    scale: 1,
                    rotateX: 0,
                    duration: 0.9,
                    stagger: { each: 0.15, from: 'center' }
                }, "-=0.5");
            }

            const button = section.querySelector('.animate-button');
            if (button) {
                tl.to(button, {
                    opacity: 1,
                    y: 0,
                    scale: 1,
                    duration: 0.6,
                    ease: "back.out(1.7)"
                }, "-=0.3");
            }
        }

        // Initialize layout and progress indicator
        positionSections(currentSection);
        updateProgressIndicator();

        // Initialize animations
        initializeAnimations();


    </script>
</body>
</html>